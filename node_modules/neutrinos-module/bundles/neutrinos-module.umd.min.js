!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/common/http"),require("@angular/forms"),require("@angular/platform-browser/animations"),require("@angular/flex-layout"),require("neutrinos-seed-services"),require("@angular/material/icon"),require("@angular/material/dialog"),require("@angular/material/button"),require("@angular/material/button-toggle"),require("signature_pad")):"function"==typeof define&&define.amd?define("neutrinos-module",["exports","@angular/core","@angular/common","@angular/common/http","@angular/forms","@angular/platform-browser/animations","@angular/flex-layout","neutrinos-seed-services","@angular/material/icon","@angular/material/dialog","@angular/material/button","@angular/material/button-toggle","signature_pad"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["neutrinos-module"]={},t.ng.core,t.ng.common,t.ng.common.http,t.ng.forms,t.ng.platformBrowser.animations,t.ng.flexLayout,t["neutrinos-seed-services"],t.ng.material.icon,t.ng.material.dialog,t.ng.material.button,t.ng.material.buttonToggle,t.signature_pad)}(this,(function(t,e,n,o,i,r,a,s,c,u,l,p,d){"use strict";function h(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=h(d),m=function(){function t(t){var e=this;this.http=t,this.checkFileExist=function(t,n,o,i){return window.resolveLocalFileSystemURL(t+n,(function(){var r=4;if(n.lastIndexOf("(")>-1){var a=parseInt(n.slice(n.lastIndexOf("(")+1,n.lastIndexOf(")")),10);isNaN(a)?(o+=1,n=(n=n.slice(0,n.lastIndexOf("."))+n.slice(n.lastIndexOf("."))).slice(0,n.lastIndexOf("."))+" ("+o+")"+n.slice(n.lastIndexOf("."))):((o=a+1)>10&&o<100?r+=1:o>100&&(r+=2),n=n.slice(0,n.lastIndexOf(".")-r)+" ("+o+")"+n.slice(n.lastIndexOf(".")))}else o+=1,n=(n=n.slice(0,n.lastIndexOf("."))+n.slice(n.lastIndexOf("."))).slice(0,n.lastIndexOf("."))+" ("+o+")"+n.slice(n.lastIndexOf("."));return e.checkFileExist(t,n,o,i)}),(function(){return i(n)}))},this.systemService=s.NSystemService.getInstance(),this.appProperties=this.systemService.getVal("properties")}return t.prototype.getFileInfo=function(t){var e=this.systemService.getDataModelUrl();return t.metadata?e+=this.appProperties.appName+"_"+t.entityName+'.files?filter={"metadata.key": "'+t.metadata.key+'"}':e+=this.appProperties.appName+"_"+t.entityName+".files/"+t.fileId,this.http.get(e)},t.prototype.getFormData=function(t){return new Promise((function(e,n){window.resolveLocalFileSystemURL(t,(function(t){t.file((function(t){var o=new FileReader;o.onerror=function(t){return n(t)},o.onloadend=function(n){var i=new FormData,r=new Blob([new Uint8Array(o.result)],{type:t.type});return i.append("file",r,t.name),e(i)},o.readAsArrayBuffer(t)}))}),(function(t){return n(t)}))}))},t.prototype.getPicture=function(t){var e=this;return new Promise((function(n,o){document.addEventListener("deviceready",(function(){navigator.camera.getPicture((function(t){e.getFormData(t).then((function(t){return n(t)})).catch((function(t){return o(t)}))}),(function(t){return o(t)}),t)}),!1)}))},t.prototype.scanPicture=function(t){var e=this;return new Promise((function(n,o){document.addEventListener("deviceready",(function(){t.hasOwnProperty("sourceType")&&t.hasOwnProperty("doUpload")?scan.scanDoc(t.sourceType,(function(i){t.doUpload?e.getFormData(i).then((function(t){return n(t)})).catch((function(t){return o(t)})):n(i)}),(function(t){return o(t)})):o("sourceType not found")}),!1)}))},t.prototype.getBarcode=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){cordova.plugins.barcodeScanner.scan((function(t){return t.cancelled?n(t):e(t)}),(function(t){return n(t)}),t)}),!1)}))},t.prototype.getVideo=function(t){var e=this;return new Promise((function(t,n){document.addEventListener("deviceready",(function(){navigator.device.capture.captureVideo((function(o){var i=o[0].fullPath;e.getFormData(i).then((function(e){return t(e)})).catch((function(t){return n(t)}))}),(function(t){return n(t)}),{})}),!1)}))},t.prototype.getTts=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("text")?TTS.speak(t).then((function(){return e("success")}),(function(t){return n(t)})):n("text not found")}),!1)}))},t.prototype.getShake=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("start")&&t.hasOwnProperty("sensitivity")?t.start?shake.startWatch((function(){return e("success")}),t.sensitivity,(function(){return n("error")})):shake.stopWatch():n("start or sensitivity not found")}),!1)}))},t.prototype.getOcr=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("uriOrBase")&&t.hasOwnProperty("returnType")?navigator.camera.getPicture((function(o){textocr.recText(t.uriOrBase,t.returnType,o,(function(t){return e(t)}),(function(t){return n(t)}))}),(function(t){return n(t)}),t):n("uriOrBase or returnType not found")}),!1)}))},t.prototype.getFingerprint=function(t){return new Promise((function(e,n){document.addEventListener("deviceready",(function(){t.hasOwnProperty("clientId")&&t.hasOwnProperty("clientSecret")?Fingerprint.isAvailable((function(o){Fingerprint.show(t,(function(){return e("success")}),(function(t){return n(t)}))}),(function(t){return n(t)})):n("clientId or clientSecret not found")}),!1)}))},t.prototype.upload=function(t){var e=this;return new Promise((function(n,o){var i=new FormData;t.formData?i=t.formData:t.files?i.append("file",t.files):o("No file selected!"),t.metadata&&i.append("metadata",JSON.stringify(t.metadata));var r=e.systemService.getFileIOUrl()+""+t.entityName,a={headers:e.setHeaders({"Content-Type":"no-content"})};e.http.post(r,i,a).subscribe((function(t){return n(t)}),(function(t){return o(t)}))}))},t.prototype.download=function(t){var e=this;return new Promise((function(n,o){if(!t.entityName||!t.metadata&&!t.fileId)return o("download options not found");e.getFileInfo(t).subscribe((function(n){n=t.metadata?n[n.length-1]:n.result;var i={contentType:"",filename:""};if(n&&n.contentType&&n.filename){i.contentType=n.contentType,i.filename=n.filename;var r=e.systemService.getFileIOUrl();t.metadata?r+=t.entityName+'?metadataFilter={"metadata.key": "'+t.metadata.key+'"}':r+=t.entityName+"/"+t.fileId;var a={Accept:i.contentType};e.http.get(r,{headers:e.setHeaders(a),responseType:"blob"}).subscribe((function(t){var n=new Blob([t.body],{type:i.contentType});e.saveFile(n,i.filename).then((function(t){})).catch((function(t){return o(t)}))}),(function(t){return o(t)}))}else o("fileInfo not exit")}),(function(t){return o(t)}))}))},t.prototype.saveFile=function(t,e){var n=this;return new Promise((function(o,i){if("mobile"==n.systemService.checkDevice()){var r=n.systemService.isAndroid()?cordova.file.externalRootDirectory:cordova.file.documentsDirectory;n.createDirectory(r,n.appProperties.appName,e,t).then((function(t){return o(t)})).catch((function(t){return i(t)}))}else n.saveToBrowser(t,e).then((function(t){return o(t)}))}))},t.prototype.saveToBrowser=function(t,e){return new Promise((function(n){if(!document.documentMode&&!!window.StyleMedia)window.navigator.msSaveBlob(t,e);else{var o=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.style.display="none",i.download=e,i.href=o,i.click(),window.URL.revokeObjectURL(o),document.body.removeChild(i),i.remove()}return n("download complete")}))},t.prototype.createDirectory=function(t,e,n,o){var i=this;return new Promise((function(r,a){window.resolveLocalFileSystemURL(t,(function(t){t.getDirectory(e,{create:!0},(function(t){i.checkFileExist(t.nativeURL,n,0,(function(e){t.getFile(e,{create:!0},(function(t){t.createWriter((function(e){e.onwriteend=function(){return r(t.toURL())},e.onerror=function(t){return a(t)},e.write(o)}))}))}))}),(function(t){return a(t)}))}),(function(t){return a(t)}))}))},t.prototype.setHeaders=function(t){var e=new o.HttpHeaders;for(var n in t)n&&(e=e.set(n,t[n]));return e},t}();m.decorators=[{type:e.Injectable}],m.ctorParameters=function(){return[{type:o.HttpClient}]};var g=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getPicture().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getPicture=function(){var t=this;return new Promise((function(e,n){t.fsv.getPicture(t.cameraOptions).then((function(o){var i={formData:o,entityName:t.cameraOptions.entityName,metadata:t.cameraOptions.metadata};t.fsv.upload(i).then((function(t){return e(t)})).catch((function(t){return n(t)}))})).catch((function(t){return n(t)}))}))},t}();g.decorators=[{type:e.Directive,args:[{selector:"[n-camera]"}]}],g.ctorParameters=function(){return[{type:m}]},g.propDecorators={cameraOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var v=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.downloadFile().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.downloadFile=function(){return this.fsv.download(this.downloadOptions)},t}();v.decorators=[{type:e.Directive,args:[{selector:"[n-download]"}]}],v.ctorParameters=function(){return[{type:m}]},v.propDecorators={downloadOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var y=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getPicture().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getPicture=function(){var t=this;return new Promise((function(e,n){t.fsv.scanPicture(t.scanOptions).then((function(o){if(t.scanOptions.doUpload){var i={formData:o,entityName:t.scanOptions.entityName,metadata:t.scanOptions.metadata};t.fsv.upload(i).then((function(t){e(t)})).catch((function(t){return n(t)}))}else e(o)})).catch((function(t){return n(t)}))}))},t}();y.decorators=[{type:e.Directive,args:[{selector:"[n-scan]"}]}],y.ctorParameters=function(){return[{type:m}]},y.propDecorators={scanOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var b=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getVideo().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getVideo=function(){var t=this;return new Promise((function(e,n){t.fsv.getVideo(t.videoOptions).then((function(o){var i={formData:o,entityName:t.videoOptions.entityName,metadata:t.videoOptions.metadata};t.fsv.upload(i).then((function(t){return e(t)})).catch((function(t){return n(t)}))})).catch((function(t){return n(t)}))}))},t}();b.decorators=[{type:e.Directive,args:[{selector:"[n-video]"}]}],b.ctorParameters=function(){return[{type:m}]},b.propDecorators={videoOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var w=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getBarcode().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getBarcode=function(){var t=this;return new Promise((function(e,n){t.fsv.getBarcode(t.barcodeOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t}();w.decorators=[{type:e.Directive,args:[{selector:"[n-barcode]"}]}],w.ctorParameters=function(){return[{type:m}]},w.propDecorators={barcodeOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var O=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getTts().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getTts=function(){var t=this;return new Promise((function(e,n){t.fsv.getTts(t.ttsOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t}();O.decorators=[{type:e.Directive,args:[{selector:"[n-tts]"}]}],O.ctorParameters=function(){return[{type:m}]},O.propDecorators={ttsOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var I=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getFingerprint().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getFingerprint=function(){var t=this;return new Promise((function(e,n){t.fsv.getFingerprint(t.fingerprintOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t}();I.decorators=[{type:e.Directive,args:[{selector:"[n-fingerprint]"}]}],I.ctorParameters=function(){return[{type:m}]},I.propDecorators={fingerprintOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var k=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getOcr().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getOcr=function(){var t=this;return new Promise((function(e,n){t.fsv.getOcr(t.ocrOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t}();k.decorators=[{type:e.Directive,args:[{selector:"[n-ocr]"}]}],k.ctorParameters=function(){return[{type:m}]},k.propDecorators={ocrOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var D=function(){function t(t){this.fsv=t,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.methodToHandleMouseClickAction=function(){var t=this;this.getShake().then((function(e){return t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)}))},t.prototype.getShake=function(){var t=this;return new Promise((function(e,n){t.fsv.getShake(t.shakeOptions).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},t}();D.decorators=[{type:e.Directive,args:[{selector:"[n-shake]"}]}],D.ctorParameters=function(){return[{type:m}]},D.propDecorators={shakeOptions:[{type:e.Input}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}],methodToHandleMouseClickAction:[{type:e.HostListener,args:["click"]}]};var x=function(){function t(t,n){this.fileIOService=t,this._renderer=n,this.onsuccess=new e.EventEmitter,this.onerror=new e.EventEmitter}return t.prototype.handleUpload=function(){var t=this;this.isDone=!1,this.file&&this.uploadOptions&&this.uploadOptions.entityName&&this.uploadOptions.metadata?this.fileIOService.upload({files:this.file,entityName:this.uploadOptions.entityName,metadata:this.uploadOptions.metadata}).then((function(e){t.isDone=!0,t.onsuccess.emit(e)})).catch((function(e){return t.onerror.emit(e)})):this.onerror.emit(new Error("Upload options missing"))},t.prototype.handleSelect=function(t){t.target.files&&t.target.files[0]&&(this.file=t.target.files[0],this.fileName=this.file.name)},t.prototype.cancel=function(){this.file=null,this.fileName=null,this.isDone=!1,this.fileInput&&this._renderer.setProperty(this.fileInput,"value","")},t.prototype.disableFileUploadButton=function(){return"boolean"==typeof this.disableButton?this.disableButton:"disabled"===this.disableButton||"true"===this.disableButton},t}();x.decorators=[{type:e.Component,args:[{selector:"n-file-upload",template:'<div>\n  <button mat-raised-button class="bh-file-upload" (click)="fileInput.click()" color="primary"\n    *ngIf="!fileName" [disabled]="disableFileUploadButton()">\n    <mat-icon>attach_file</mat-icon>\n    <span>Choose a file...</span>\n    <input #fileInput type="file" (change)="handleSelect($event)" style="display:none;" />\n  </button>\n  <div *ngIf="fileName">\n    <button mat-raised-button color="primary" (click)="handleUpload()">\n      <mat-icon>file_upload</mat-icon>\n      <span>{{fileName}}</span>\n    </button>\n    <button *ngIf="!isDone" mat-icon-button color="warn" (click)="cancel()" class="bh-file-upload-cancel">\n      <mat-icon>cancel</mat-icon>\n    </button>\n    <button *ngIf="isDone" mat-icon-button (click)="cancel()" class="bh-file-upload-done">\n      <mat-icon>done</mat-icon>\n    </button>\n  </div>\n</div>\n',styles:[".bh-file-upload{padding-left:8px;padding-right:8px}.bh-file-upload-cancel{height:24px;left:-12px;position:relative;top:24px;width:24px}::ng-deep [dir=rtl] .bh-file-upload-cancel{left:0;right:-12px}.bh-file-upload-cancel mat-icon{border-radius:12px;vertical-align:baseline}.bh-file-upload-done{height:24px;left:-13px;position:relative;top:20px;width:24px}::ng-deep [dir=rtl] .bh-file-upload-done{left:0;right:-12px}.bh-file-upload-done mat-icon{border-radius:12px;vertical-align:baseline}"]}]}],x.ctorParameters=function(){return[{type:m},{type:e.Renderer2}]},x.propDecorators={fileInput:[{type:e.ViewChild,args:["fileInput",{static:!1}]}],uploadOptions:[{type:e.Input}],disableButton:[{type:e.Input,args:["disabled"]}],onsuccess:[{type:e.Output}],onerror:[{type:e.Output}]};var P=function t(e){this.dialogRef=e,this.messageContent=t.message,this.titleContent=t.title};P.title="",P.message="",P.decorators=[{type:e.Component,args:[{selector:"n-alert-dialog",template:'\n<div class="alertContainer" fxLayout="column">\n  <h4 mat-dialog-title>{{titleContent}}</h4>\n  <span class="msgContainer" >{{messageContent}}</span>\n  <button mat-raised-button (click)="dialogRef.close()">Close</button>\n</div>\n',styles:[".alertContainer{height:auto;width:auto}.msgContainer{margin-bottom:.5em}"]}]}],P.ctorParameters=function(){return[{type:u.MatDialogRef}]};var C=function(){function t(t){this.dialog=t}return t.prototype.alert=function(t,e,n){P.message=t,P.title=e,this.dialog.open(P,n)},t}();C.decorators=[{type:e.Injectable}],C.ctorParameters=function(){return[{type:u.MatDialog}]};var E=function(){function t(){this.toggleOptions=[],this.align="horizontal",this.indexChange=new e.EventEmitter,this.valueChange=new e.EventEmitter}return t.prototype.ngOnInit=function(){this.checkNumber(this.checkedIndex)&&(this.checkedIndex=Number(this.checkedIndex)),this.checkNumber(this.disabledIndex)&&(this.disabledIndex=Number(this.disabledIndex))},t.prototype.ngOnChanges=function(t){t.checkedIndex&&this.checkNumber(this.checkedIndex)?this.checkedIndex=Number(this.checkedIndex):t.disabledIndex&&this.checkNumber(this.disabledIndex)&&(this.disabledIndex=Number(this.disabledIndex))},t.prototype.optionClicked=function(t){this.toggleOptions&&this.toggleOptions.length>0&&(this.indexChange.emit(t),this.toggleOptions[t]&&this.toggleOptions[t].value&&this.valueChange.emit(this.toggleOptions[t].value))},t.prototype.checkNumber=function(t){return null!=t&&Number.isNaN(Number(t))},t}();E.decorators=[{type:e.Component,args:[{selector:"n-toggleoptions",template:'<mat-button-toggle-group #group="matButtonToggleGroup" [vertical]="align == \'vertical\'? true: false" [value]="value">\n    <mat-button-toggle *ngFor="let option of toggleOptions; let i = index;" [value]="option.value" [disabled]="option.disabled || disabledIndex == i" [checked]="option.checked || checkedIndex == i" (click)="optionClicked(i)" fxLayoutAlign="center center">\n        <mat-icon *ngIf="option.icon">{{option.icon}}</mat-icon>\n        <span *ngIf="!option.icon && option.value">{{option.value}}</span>\n    </mat-button-toggle>\n</mat-button-toggle-group>'}]}],E.propDecorators={toggleOptions:[{type:e.Input,args:["toggleOptions"]}],align:[{type:e.Input,args:["align"]}],disabledIndex:[{type:e.Input,args:["disabledIndex"]}],checkedIndex:[{type:e.Input,args:["checkedIndex"]}],value:[{type:e.Input,args:["value"]}],indexChange:[{type:e.Output}],valueChange:[{type:e.Output}]};var N=function(){function t(){this.imageDataValue="",this.signaturePad="",this.mode="responsive",this.canvasMode="fullscreen",this.imageDataChange=new e.EventEmitter,this.imageDataUrl=new e.EventEmitter}return Object.defineProperty(t.prototype,"imageData",{get:function(){return this.imageDataValue},set:function(t){var e;this.imageDataValue=JSON.parse(JSON.stringify(t)),(null===(e=this.signaturePad)||void 0===e?void 0:e.canvas)&&(this.saveFromSavedData(this.imageDataValue),"responsive"!==this.mode&&(this.imageSrcDataUrl=this.signaturePad.toDataURL()))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.savedDataPoints=this.previousSavedData=JSON.parse(JSON.stringify(this.imageData))},t.prototype.ngAfterViewInit=function(){var t=this;this.createCanvas(),this.saveFromSavedData(this.savedDataPoints),setTimeout((function(){"responsive"!==t.mode&&(t.hideCanvas(),t.fitToContainer(t.signaturecanvas.nativeElement,document.body.clientHeight,document.body.clientWidth),t.clearCanvas(),t.drawFromSavedData(t.savedDataPoints),t.imageSrcDataUrl=t.signaturePad.toDataURL())}))},t.prototype.saveFromSavedData=function(t){this.updatePreviousSaveData(t),this.drawFromSavedData(t),this.savedDataPoints=this.signaturePad.toData()},t.prototype.createCanvas=function(){this.fitToContainer(this.signaturecanvas.nativeElement),this.signaturePad=new f.default(this.signaturecanvas.nativeElement,this.assignOptions())},t.prototype.saveCavas=function(){this.signaturePad&&(this.signaturePad.isEmpty()&&this.clearCanvas(),this.imageDataChange.emit(JSON.parse(JSON.stringify(this.signaturePad.toData()))),this.imageDataUrl.emit(this.signaturePad.toDataURL()),"responsive"!==this.mode&&(this.hideCanvas(),this.imageSrcDataUrl=this.signaturePad.toDataURL()),this.saveFromSavedData(this.signaturePad.toData()))},t.prototype.clearCanvas=function(){this.signaturePad.clear()},t.prototype.undoCanvas=function(){var t=this.signaturePad.toData();t&&(t.pop(),this.signaturePad.fromData(t))},t.prototype.showCanvas=function(){this.classAbs=!0,this.canvasMode="fullscreen",this.signaturePad||this.createCanvas(),this.fitToContainer(this.signaturecanvas.nativeElement,document.body.clientHeight,document.body.clientWidth),this.clearCanvas(),this.updatePreviousSaveData(this.savedDataPoints),this.drawFromSavedData(this.savedDataPoints)},t.prototype.hideCanvas=function(){this.canvasMode="responsive"},t.prototype.cancel=function(){this.savedDataPoints=Object.assign([],this.previousSavedData),this.clearCanvas(),this.drawFromSavedData(this.savedDataPoints)},t.prototype.updatePreviousSaveData=function(t){this.previousSavedData=Object.assign([],t)},t.prototype.drawFromSavedData=function(t){t&&(this.signaturePad.clear(),this.signaturePad.fromData(t))},t.prototype.fitToContainer=function(t,e,n){t.style.width="100%",t.style.height="calc(100% - 56px)",e&&n?(t.width=n,t.height=e-56):(t.width=t.offsetWidth,t.height=t.offsetHeight)},t.prototype.assignOptions=function(){var t={};return t.backgroundColor=this.checkIfValidValueAndRGB(this.backgroundColor,"backgroundColor"),t.dotSize=this.checkIfValidValueAndNumber(this.dotSize,"dotSize"),t.minWidth=this.checkIfValidValueAndNumber(this.minWidth,"minWidth"),t.maxWidth=this.checkIfValidValueAndNumber(this.maxWidth,"maxWidth"),t.throttle=this.checkIfValidValueAndNumber(this.throttle,"throttle"),t.minDistance=this.checkIfValidValueAndNumber(this.minDistance,"minDistance"),t.penColor=this.checkIfValidValueAndRGB(this.penColor,"penColor"),t.velocityFilterWeight=this.checkIfValidValueAndNumber(this.velocityFilterWeight,"velocityFilterWeight"),(t=JSON.parse(JSON.stringify(t))).onBegin=this.checkIfValidValueAndFunction(this.onBegin,"onBegin"),t.onEnd=this.checkIfValidValueAndFunction(this.onEnd,"onEnd"),t},t.prototype.checkIfValidValueAndNumber=function(t,e){if(this.checkIfValid(t)&&this.checkNumber(t))return t;this.invalidToast(e,"num")},t.prototype.checkIfValidValueAndRGB=function(t,e){if(this.checkIfValid(t)&&this.checkRGB(t))return t;this.invalidToast(e,"rgb")},t.prototype.checkIfValidValueAndFunction=function(t,e){if(this.checkIfValid(t)&&this.checkIfValidFunction(t))return t;this.invalidToast(e,"function format")},t.prototype.checkIfValid=function(t){return null!=t?t:void 0},t.prototype.checkNumber=function(t){return this.checkIsNan(Number(t))?void 0:Number(t)},t.prototype.checkIfValidFunction=function(t){return"function"==typeof t?t:void 0},t.prototype.checkRGB=function(t){var e=new RegExp(/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/),n=new RegExp(/rgb\((\d{1,3}),[ \t]+(\d{1,3}),(\d{1,3})\)/),o=new RegExp(/rgb\((\d{1,3}),(\d{1,3}),[ \t]+(\d{1,3})\)/);return e.test(t)||n.test(t)||o.test(t)},t.prototype.checkIsNan=function(t){return Number.isNaN(t)},t.prototype.invalidToast=function(t,e){e},t.prototype.isDataURL=function(t){if(t&&"string"==typeof t){return!!t.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}return!1},t}();N.decorators=[{type:e.Component,args:[{selector:"n-signature",template:'<div style="width: 100%; height: 100%">\n\t<div fxFill fxLayout="row" *ngIf="mode === \'click-fullscreen\' && canvasMode !== \'fullscreen\'" class="signature-component-border">\n\t\t<div fxFlex="calc(100%-56px)" fxLayout="column">\n\t\t\t<img *ngIf="imageSrcDataUrl" [src]="imageSrcDataUrl" fxFill />\n\t\t</div>\n\t\t<div fxFlex="56px" fxLayoutAlign=" center" class="signature-component-border">\n\t\t\t<button mat-icon-button (click)="showCanvas()">\n\t\t\t\t<mat-icon>mode_edit</mat-icon>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n\t<div\n\t\tfxFill\n\t\tfxLayout="column"\n\t\tclass="signature-component-border"\n\t\t[fxShow]="(mode === \'click-fullscreen\' && canvasMode === \'fullscreen\') || mode === \'responsive\'"\n\t\t[ngClass]="{\'signature-canvas-fullscreen\': classAbs}"\n\t>\n\t\t<canvas #signaturecanvas></canvas>\n\t\t<div fxFlex="56px" fxLayoutAlign="center center" class="signature-component-border">\n\t\t\t<button mat-icon-button (click)="undoCanvas()">\n\t\t\t\t<mat-icon>undo</mat-icon>\n\t\t\t</button>\n\t\t\t<button mat-icon-button (click)="clearCanvas()">\n\t\t\t\t<mat-icon>loop</mat-icon>\n\t\t\t</button>\n\t\t\t<button mat-icon-button (click)="saveCavas()">\n\t\t\t\t<mat-icon>save</mat-icon>\n\t\t\t</button>\n\t\t\t<button mat-icon-button (click)="canvasMode = \'responsive\'; cancel()">\n\t\t\t\t<mat-icon>clear</mat-icon>\n\t\t\t</button>\n\t\t</div>\n\t</div>\n</div>\n',styles:["\n\t\t\t:host {\n\t\t\t\theight: 100% !important;\n\t\t\t}\n\t\t\t.signature-canvas-fullscreen {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\tright: 0;\n\t\t\t\tleft: 0;\n\t\t\t}\n\t\t\t.signature-component-border {\n\t\t\t\tborder: 2px solid black;\n\t\t\t}\n\t\t"]}]}],N.propDecorators={signaturecanvas:[{type:e.ViewChild,args:["signaturecanvas",{static:!1}]}],canvasparent:[{type:e.ViewChild,args:["canvasparent",{static:!1}]}],backgroundColor:[{type:e.Input,args:["backgroundColor"]}],dotSize:[{type:e.Input,args:["dotSize"]}],minWidth:[{type:e.Input,args:["minWidth"]}],maxWidth:[{type:e.Input,args:["maxWidth"]}],throttle:[{type:e.Input,args:["throttle"]}],minDistance:[{type:e.Input,args:["minDistance"]}],penColor:[{type:e.Input,args:["penColor"]}],velocityFilterWeight:[{type:e.Input,args:["velocityFilterWeight"]}],onBegin:[{type:e.Input,args:["onBegin"]}],onEnd:[{type:e.Input,args:["onEnd"]}],mode:[{type:e.Input,args:["mode"]}],imageDataChange:[{type:e.Output}],imageDataUrl:[{type:e.Output}],imageData:[{type:e.Input}]};var S=[g,v,y,b,w,O,I,k,D,x,P,E,N],F=function(){};F.decorators=[{type:e.NgModule,args:[{imports:[o.HttpClientModule,i.FormsModule,n.CommonModule,c.MatIconModule,u.MatDialogModule,l.MatButtonModule,r.BrowserAnimationsModule,p.MatButtonToggleModule,s.NeutrinosSeedServicesModule,a.FlexLayoutModule],declarations:[S],exports:[S,x,s.NeutrinosSeedServicesModule],providers:[m,C]}]}],t.NAlertComponent=P,t.NAlertService=C,t.NFileIOService=m,t.NFileUploadComponent=x,t.NeutrinosModule=F,t.ɵa=g,t.ɵb=v,t.ɵc=y,t.ɵd=b,t.ɵe=w,t.ɵf=O,t.ɵg=I,t.ɵh=k,t.ɵi=D,t.ɵj=E,t.ɵk=N,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=neutrinos-module.umd.min.js.map